#include <stdio.h>
#include <string.h>
#include <math.h>
#include "bisr.h"
#include "gcsoc.h"

//#define GEN_TEST
FILE *fp_dumper;

#ifdef GEN_TEST
//普通资源：不同行，不同列，修补资源正常
static const UNSG32 testpattern1[] = 
{
	0xbeef1000, 0xbeef1100, 0x12312142, 0x12358121,
	0xbeef1200, 0xbeef1300, 0xbeef1400, 0xdeaddead
};

//普通资源：同行同小MAT，不同列，修补资源正常
//(row, col): (0x123, 0x10), (0x2A0, 0x10)
static const UNSG32 testpattern2[] =
{
	0xbeef1000, 0xbeef1100, 0x9190, 0x15010,
	0xbeef1200, 0xbeef1300, 0xbeef1400, 0xdeaddead
};

//普通资源：同列，不同行，修补资源正常
//(row, col): (0x123, 0x10), (0x10, 0x5), (0x200, 0x24), (0x19, 0x11), (0x123, 0x30)
static const UNSG32 testpattern3[] =
{
	0xbeef1000, 0xbeef1100, 0x9190, 0x805,
	0x10024, 0xcf1, 0x91B0,
	0xbeef1200, 0xbeef1300, 0xbeef1400, 0xdeaddead
};

//普通资源：混合，修补资源
//(row, col)
//sMAT0: (0x123, 0x10), (0x10, 0x5), (0x200, 0x24), (0x19, 0x71), (0x123, 0x30)
//       (0x2A0, 0x10), 
//sMAT1: (0x2B0, 0x0), (0x54F, 0x49), (0x2B0, 0x17), (0x2B1, 0x17)
//sMAT23:(0x3FFF, 0x73), (0x3DD0, 0x12), (0x3FFF, 0x7F)
//WL Redundancy: (0x10, 0x0), (0x11, 0x60)
//BL Redundancy: (0x123, 0x1), (0x3D50, 0x0), (0x3D50, 0x1), (0x3D51, 0x1), (0x3D52, 0x1)
//Cross: (0x
static const UNSG32 testpattern4[] =
{
	0xbeef1000, 0xbeef1100, 0x9190, 0x805, 0x10024, 0xCF1, 0x91B0, 0x15010,
	0x15800, 0x2A7C9, 0x15817, 0x15897,
	0x1FFFF3, 0x1EEE92, 0x1FFFFF,
	0xbeef1200, 0x800, 0x8E0,
	0xbeef1300, 0x9181, 0x1EA800, 0x1EA801, 0x1EA881, 0x1EA901, 
	0xbeef1400, 0xdeaddead
};
#endif



void main(UNSG32 argc, UNSG8* argv[])
{

#ifdef GEN_TEST
	FILE *fp = fopen("ft_res6.bin", "wb");
	fwrite(testpattern1, sizeof(testpattern1), 1, fp);
	fclose(fp);
	return;
#endif

	if ( argc != 2)
		PRN_LOG(PRN_ERR, "The Program needs 6 parameteres!\n");

	//Merge(argv, 2);

	//GCSOC_HW_check();

 	SDR_BISR_Entry(argv);

	return ;
}